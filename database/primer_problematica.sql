--update a empleados para cambiar employee_hire_date a YYYY-MM-DD
UPDATE employees
SET hire_date = 
    SUBSTR(hire_date, 7, 4) || '-' || 
    SUBSTR(hire_date, 4, 2) || '-' || 
    SUBSTR(hire_date, 1, 2)
WHERE hire_date LIKE '__-__-____';

--borra la tabla tarjeta
DROP TABLE IF EXISTS cards;
--crea la tabla tarjeta con sus componentes
CREATE TABLE cards (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER NOT NULL,
    card_number TEXT UNIQUE NOT NULL CHECK (LENGTH(numero) <= 20),
    cvv TEXT NOT NULL CHECK (LENGTH(cvv) = 3),
    issue_date varchar(5) NOT NULL CHECK (issue_date GLOB '[0-1][0-9]/[0-9][0-9]'), 
    expiration_date varchar(5) NOT NULL CHECK (expiration_date GLOB '[0-1][0-9]/[0-9][0-9]'),  
    FOREIGN KEY (customer_id) REFERENCES customer(id)
);
--borra la info de clientes de tarjeta
DELETE FROM cards WHERE customer_id BETWEEN 1 AND 100;

--crea 100 tarjetas con cvv para 100 usuarios
INSERT INTO cards (customer_id, card_number, cvv, issue_date, expiration_date) VALUES
(1, "1111222233334444", "123", "01/30", "10/30"),
(2, "2222333344445555", "456", "02/30", "11/30"),
(3, "3333444455556666", "789", "03/30", "12/30"),
(4, "4444555566667777", "012", "04/30", "01/31"),
(5, "5555666677778888", "345", "05/30", "02/31"),
(6, "6666777788889999", "678", "06/30", "03/31"),
(7, "7777888899990000", "901", "07/30", "04/31"),
(8, "8888999900001111", "234", "08/30", "05/31"),
(9, "9999000011112222", "567", "09/30", "06/31"),
(10, "0000111122223333", "890", "10/30", "07/31"),
(11, "1111222233334445", "321", "11/30", "08/31"),
(12, "2222333344445556", "654", "12/30", "09/31"),
(13, "3333444455556667", "987", "01/31", "10/31"),
(14, "4444555566667778", "135", "02/31", "11/31"),
(15, "5555666677778889", "246", "03/31", "12/31"),
(16, "6666777788880000", "357", "04/31", "01/32"),
(17, "7777888899991112", "468", "05/31", "02/32"),
(18, "8888999900002223", "579", "06/31", "03/32"),
(19, "9999000011113334", "680", "07/31", "04/32"),
(20, "0000111122224445", "791", "08/31", "05/32"),
(21, "1111222233335556", "802", "09/31", "06/32"),
(22, "2222333344446667", "913", "10/31", "07/32"),
(23, "3333444455557778", "024", "11/31", "08/32"),
(24, "4444555566668889", "135", "12/31", "09/32"),
(25, "5555666677779990", "246", "01/32", "10/32"),
(26, "6666777788880001", "357", "02/32", "11/32"),
(27, "7777888899991113", "468", "03/32", "12/32"),
(28, "8888999900002224", "579", "04/32", "01/33"),
(29, "9999000011113335", "680", "05/32", "02/33"),
(30, "0000111122224446", "791", "06/32", "03/33"),
(31, "1111222233335557", "802", "07/32", "04/33"),
(32, "2222333344446668", "913", "08/32", "05/33"),
(33, "3333444455557779", "024", "09/32", "06/33"),
(34, "4444555566668880", "135", "10/32", "07/33"),
(35, "5555666677779991", "246", "11/32", "08/33"),
(36, "6666777788880002", "357", "12/32", "09/33"),
(37, "7777888899991114", "468", "01/33", "10/33"),
(38, "8888999900002225", "579", "02/33", "11/33"),
(39, "9999000011113336", "680", "03/33", "12/33"),
(40, "0000111122224447", "791", "04/33", "01/34"),
(41, "1111222233335558", "802", "05/33", "02/34"),
(42, "2222333344446669", "913", "06/33", "03/34"),
(43, "3333444455557780", "024", "07/33", "04/34"),
(44, "4444555566668891", "135", "08/33", "05/34"),
(45, "5555666677779992", "246", "09/33", "06/34"),
(46, "6666777788880003", "357", "10/33", "07/34"),
(47, "7777888899991115", "468", "11/33", "08/34"),
(48, "8888999900002226", "579", "12/33", "09/34"),
(49, "9999000011113337", "680", "01/34", "10/34"),
(50, "0000111122224448", "791", "02/34", "11/34"),
(51, "1111222233335559", "802", "03/34", "12/34"),
(52, "2222333344446670", "913", "04/34", "01/35"),
(53, "3333444455557781", "024", "05/34", "02/35"),
(54, "4444555566668892", "135", "06/34", "03/35"),
(55, "5555666677779993", "246", "07/34", "04/35"),
(56, "6666777788880004", "357", "08/34", "05/35"),
(57, "7777888899991116", "468", "09/34", "06/35"),
(58, "8888999900002227", "579", "10/34", "07/35"),
(59, "9999000011113338", "680", "11/34", "08/35"),
(60, "0000111122224449", "791", "12/34", "09/35"),
(61, "1111222233335560", "802", "01/35", "10/35"),
(62, "2222333344446671", "913", "02/35", "11/35"),
(63, "3333444455557782", "024", "03/35", "12/35"),
(64, "4444555566668893", "135", "04/35", "01/36"),
(65, "5555666677779994", "246", "05/35", "02/36"),
(66, "6666777788880005", "357", "06/35", "03/36"),
(67, "7777888899991117", "468", "07/35", "04/36"),
(68, "8888999900002228", "579", "08/35", "05/36"),
(69, "9999000011113339", "680", "09/35", "06/36"),
(70, "0000111122224450", "791", "10/35", "07/36"),
(71, "1111222233335561", "802", "11/35", "08/36"),
(72, "2222333344446672", "913", "12/35", "09/36"),
(73, "3333444455557783", "024", "01/36", "10/36"),
(74, "4444555566668894", "135", "02/36", "11/36"),
(75, "5555666677779995", "246", "03/36", "12/36"),
(76, "6666777788880006", "357", "04/36", "01/37"),
(77, "7777888899991118", "468", "05/36", "02/37"),
(78, "8888999900002229", "579", "06/36", "03/37"),
(79, "9999000011113340", "680", "07/36", "04/37"),
(80, "0000111122224451", "791", "08/36", "05/37"),
(81, "1111222233335562", "802", "09/36", "06/37"),
(82, "2222333344446673", "913", "10/36", "07/37"),
(83, "3333444455557784", "024", "11/36", "08/37"),
(84, "4444555566668895", "135", "12/36", "09/37"),
(85, "5555666677779996", "246", "01/37", "10/37"),
(86, "6666777788880007", "357", "02/37", "11/37"),
(87, "7777888899991119", "468", "03/37", "12/37"),
(88, "8888999900002230", "579", "04/37", "01/38"),
(89, "9999000011113341", "680", "05/37", "02/38"),
(90, "0000111122224452", "791", "06/37", "03/38"),
(91, "1111222233335563", "802", "07/37", "04/38"),
(92, "2222333344446674", "913", "08/37", "05/38"),
(93, "3333444455557785", "024", "09/37", "06/38"),
(94, "4444555566668896", "135", "10/37", "07/38"),
(95, "5555666677779997", "246", "11/37", "08/38"),
(96, "6666777788880008", "357", "12/37", "09/38"),
(97, "7777888899991120", "468", "01/38", "10/38"),
(98, "8888999900002231", "579", "02/38", "11/38"),
(99, "9999000011113342", "680", "03/38", "12/38"),
(100, "0000111122224453", "791", "04/38", "01/39");